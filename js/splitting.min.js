!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.Splitting=t()}(this,(function(){"use strict";var n=document,t=n.createTextNode.bind(n);function e(n,t,e){n.style.setProperty(t,e)}function r(n,t){return n.appendChild(t)}function i(t,e,i,u){var o=n.createElement("span");return e&&(o.className=e),i&&(!u&&o.setAttribute("data-"+e,i),o.textContent=i),t&&r(t,o)||o}function u(n,t){return n.getAttribute("data-"+t)}function o(t,e){return t&&0!=t.length?t.nodeName?[t]:[].slice.call(t[0].nodeName?t:(e||n).querySelectorAll(t)):[]}function c(n){for(var t=[];n--;)t[n]=[];return t}function a(n,t){n&&n.some(t)}function s(n){return function(t){return n[t]}}var l={};function f(n,t,e,r){return{by:n,depends:t,key:e,split:r}}function d(n){return function n(t,e,r){var i=r.indexOf(t);if(-1==i)r.unshift(t),a(l[t].depends,(function(e){n(e,t,r)}));else{var u=r.indexOf(e);r.splice(i,1),r.splice(u,0,t)}return r}(n,0,[]).map(s(l))}function p(n){l[n.by]=n}function h(n,e,u,c,s){n.normalize();var l=[],f=document.createDocumentFragment();c&&l.push(n.previousSibling);var d=[];return o(n.childNodes).some((function(n){if(!n.tagName||n.hasChildNodes()){if(n.childNodes&&n.childNodes.length)return d.push(n),void l.push.apply(l,h(n,e,u,c,s));var r=n.wholeText||"",o=r.trim();o.length&&(" "===r[0]&&d.push(t(" ")),a(o.split(u),(function(n,t){t&&s&&d.push(i(f,"whitespace"," ",s));var r=i(f,e,n);l.push(r),d.push(r)}))," "===r[r.length-1]&&d.push(t(" ")))}else d.push(n)})),a(d,(function(n){r(f,n)})),n.innerHTML="",r(n,f),l}var m="words",g=f(m,0,"word",(function(n){return h(n,"word",/\s+/,0,1)})),v="chars",y=f(v,[m],"char",(function(n,t,e){var r=[];return a(e[m],(function(n,e){r.push.apply(r,h(n,"char","",t.whitespace&&e))})),r}));function w(n){var t=(n=n||{}).key;return o(n.target||"[data-splitting]").map((function(r){var i=r["üçå"];if(!n.force&&i)return i;i=r["üçå"]={el:r};var o=d(n.by||u(r,"splitting")||v),c=function(n,t){for(var e in t)n[e]=t[e];return n}({},n);return a(o,(function(n){if(n.split){var u=n.by,o=(t?"-"+t:"")+n.key,s=n.split(r,c,i);o&&(l=r,p=(d="--"+o)+"-index",a(f=s,(function(n,t){Array.isArray(n)?a(n,(function(n){e(n,p,t)})):e(n,p,t)})),e(l,d+"-total",f.length)),i[u]=s,r.classList.add(u)}var l,f,d,p})),r.classList.add("splitting"),i}))}function b(n,t,e){var r=o(t.matching||n.children,n),i={};return a(r,(function(n){var t=Math.round(n[e]);(i[t]||(i[t]=[])).push(n)})),Object.keys(i).map(Number).sort(N).map(s(i))}function N(n,t){return n-t}w.html=function(n){var t=(n=n||{}).target=i();return t.innerHTML=n.content,w(n),t.outerHTML},w.add=p;var x=f("lines",[m],"line",(function(n,t,e){return b(n,{matching:e[m]},"offsetTop")})),T=f("items",0,"item",(function(n,t){return o(t.matching||n.children,n)})),L=f("rows",0,"row",(function(n,t){return b(n,t,"offsetTop")})),k=f("cols",0,"col",(function(n,t){return b(n,t,"offsetLeft")})),A=f("grid",["rows","cols"]),C="layout",M=f(C,0,0,(function(n,t){var c=t.rows=+(t.rows||u(n,"rows")||1),a=t.columns=+(t.columns||u(n,"columns")||1);if(t.image=t.image||u(n,"image")||n.currentSrc||n.src,t.image){var s=o("img",n)[0];t.image=s&&(s.currentSrc||s.src)}t.image&&e(n,"background-image","url("+t.image+")");for(var l=c*a,f=[],d=i(0,"cell-grid");l--;){var p=i(d,"cell");i(p,"cell-inner"),f.push(p)}return r(n,d),f})),S=f("cellRows",[C],"row",(function(n,t,e){var r=t.rows,i=c(r);return a(e[C],(function(n,t,e){i[Math.floor(t/(e.length/r))].push(n)})),i})),H=f("cellColumns",[C],"col",(function(n,t,e){var r=t.columns,i=c(r);return a(e[C],(function(n,t){i[t%r].push(n)})),i})),O=f("cells",["cellRows","cellColumns"],"cell",(function(n,t,e){return e[C]}));return p(g),p(y),p(x),p(T),p(L),p(k),p(A),p(M),p(S),p(H),p(O),w}));