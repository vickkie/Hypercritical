import MouseFollower from"mouse-follower";import lozad from"lozad";let select=e=>document.querySelector(e),selectAll=e=>document.querySelectorAll(e);document.addEventListener("DOMContentLoaded",(function(){lozad(".lozad",{rootMargin:"100px 0px",loaded:function(e){}}).observe()})),gsap.registerPlugin(ScrollTrigger,ScrollSmoother),ScrollSmoother.create({smooth:1,effects:!0,smoothTouch:.1});let midmoon=select(".mid-moon"),menuclose=select(".action--close"),menuopen=select(".action--menuUzi");function open(){midmoon.classList.add("mid-moon--light"),midmoon.classList.remove("mid-moon--dark")}function close(){midmoon.classList.add("mid-moon--dark"),midmoon.classList.remove("mid-moon--light")}function assignLinks(e){for(const o in e)if(e.hasOwnProperty(o)){selectAll(o).forEach((t=>{t?t.href=e[o]:console.error(`Elements matching selector ${o} not found.`)}))}}function assignExp(e){for(const o in e)if(e.hasOwnProperty(o)){selectAll(o).forEach((t=>{t?t.innerHTML=e[o]:console.error(`Elements matching selector ${o} not found.`)}))}}function lineTimeline(e){const o=gsap.timeline({defaults:{duration:3,ease:"power3.out"}});return o.fromTo(e,{scaleX:0,opacity:0,transformOrigin:"left left"},{scaleX:1,opacity:1}),o}menuopen.addEventListener("click",open),menuclose.addEventListener("click",close),new Promise(((e,o)=>{document.addEventListener("DOMContentLoaded",(function(){fetch("includes/config.json").then((e=>e.json())).then((o=>{assignLinks(o),e()})).catch((e=>{console.error("Error loading config:",e),o(e)}))}))})).then((()=>{console.log("%c Greetings from Hypercritical","color:white;background:#c389e1; font-size: 26px;font-family:sans-serif")})).catch((e=>{console.error("Failed to load configuration or assign links:",e)})),new Promise(((e,o)=>{document.addEventListener("DOMContentLoaded",(function(){fetch("includes/config-data.json").then((e=>e.json())).then((o=>{assignExp(o),e()})).catch((e=>{console.error("Error loading config:",e),o(e)}))}))})).then((()=>{})).catch((e=>{console.error("Failed to load configuration or assign links:",e)})),assignExp(),selectAll("[line-trigger]").forEach((function(e){const o=e.getAttribute("line-trigger"),t=lineTimeline(e);ScrollTrigger.create({trigger:o,start:"top 92%",animation:t,onEnter:()=>t.play(),onLeaveBack:()=>t.reverse({duration:6.5})})})),document.addEventListener("DOMContentLoaded",(function(){let e=select("#toTop");function o(){(window.scrollY||document.documentElement.scrollTop)>1.2*window.innerHeight?e.style.display="block":e.style.display="none"}o(),window.addEventListener("scroll",o),e.addEventListener("click",(function(){gsap.to(window,{duration:2,delay:0,scrollTo:{y:".hero-main"},ease:e=>Math.min(1,1.001-Math.pow(2,-10*e))})}))})),document.addEventListener("DOMContentLoaded",(function(){function e(){if(innerWidth>767){new MouseFollower({speed:.2})}let e=select(".sniper"),o=select(".snipersvg"),t=selectAll(["a","details"]),r=selectAll(".snipedblack"),n=(selectAll(".snipedwhite"),document.documentElement);new MouseFollower({el:e});t.forEach(((e,t)=>{e.addEventListener("mouseenter",(()=>{o.classList.add("rotate-cursorr")})),e.addEventListener("mouseleave",(()=>{o.classList.remove("rotate-cursorr")}))})),r.forEach((e=>{e.addEventListener("mouseenter",(()=>{n.style.setProperty("--sniper-color","#000")})),e.addEventListener("mouseleave",(()=>{document.documentElement.style.setProperty("--sniper-color","#fff")}))}))}e(),window.addEventListener("resize",e)}));let headertl=gsap.timeline({scrollTrigger:{trigger:".process-wrapper-hero",start:"center top"}});function initParallax(){selectAll(".slide").forEach(((e,o)=>{let t=e.querySelector(".parallax-process");gsap.fromTo(t,{y:innerWidth>767?"-60vh":"-10vh"},{y:innerWidth>767?"60vh":"10vh",scrollTrigger:{trigger:e,scrub:!0,start:"top bottom",end:"bottom top",markers:!1},ease:"none"})}))}headertl.addLabel("start").fromTo(".nav",{backdropFilter:"blur(0px)"},{backdropFilter:"blur(5px)",duration:.2,ease:"power3.out"}),document.addEventListener("DOMContentLoaded",(()=>{gsap.registerPlugin(ScrollTrigger);const e=gsap.utils.toArray(".white-section");var o=select(".top-arrow-wrapper"),t=select(".top-arrow-path"),r=select(".menu-name"),n=selectAll(".menu-dot-line");let l=select(".nav .below-line"),s=select(".nav_logo_parent"),a=select(".est_nav");function c(){t.style.stroke="var(--color-bg)",o.style.fill="var(--color-black)",n.forEach((e=>{e.style.background="var(--color-black)"})),r.style.color="var(--color-black)"}function i(){a.style.fill="var(--color-bg)",l.style.background="var(--color-bg)",s.style.color="var(--color-bg)",n.forEach((e=>{e.style.background="var(--color-bg)"})),r.style.color="var(--color-bg)"}function d(){let e=window.scrollY||document.documentElement.scrollTop;e<.8*window.innerHeight?i():e>=.8*window.innerHeight&&e<1.8*window.innerHeight&&(t.style.stroke="var(--color-black)",a.style.fill="var(--color-black)",l.style.background="var(--color-black)",s.style.color="var(--color-black)",o.style.fill="var(--color-black)",n.forEach((e=>{e.style.background="var(--color-black)"})),r.style.color="var(--color-black)")}d(),window.addEventListener("scroll",d),e.forEach(((e,o)=>{gsap.timeline({scrollTrigger:{trigger:e,id:o+1,start:"top top",endtrigger:e,end:"bottom bottom",scrub:!0,markers:!1,onEnter:()=>c(),onLeave:()=>i(),onEnterBack:()=>c(),onLeaveBack:()=>i()}})}))})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".col__content-txt").forEach((e=>{const o=e.querySelector(".details-content"),t=e.querySelector("summary");gsap.set(o,{height:0,overflow:"hidden"}),t.addEventListener("click",(function(t){e.hasAttribute("open")?gsap.to(o,{height:0,duration:.5,onComplete:()=>{e.removeAttribute("open")}}):function(){const t=o.scrollHeight;e.setAttribute("open",""),gsap.fromTo(o,{height:0},{height:t,duration:.5})}(),t.preventDefault()}))}));const e=document.querySelectorAll("details");e.forEach((o=>{o.addEventListener("click",(t=>{e.forEach((e=>{e!=o&&e.removeAttribute("open")}))}))}))})),gsap.registerPlugin(ScrollTrigger),gsap.registerPlugin(SplitText);let title=new SplitText(".split-chars",{type:"words,lines,chars",wordsClass:"content__title word",charsClass:"char",linesClass:"lines"});const showHero=()=>{[...document.querySelectorAll(".split-chars")].forEach((e=>{const o=[...e.querySelectorAll(".word")];for(const e of o){const o=e.querySelectorAll(".char"),t=o.length;gsap.timeline({defaults:{delay:.2}}).addLabel("start").fromTo(o,{"will-change":"transform, filter",transformOrigin:"50% 100%",scale:e=>{const o=e<Math.ceil(t/2)?e:Math.ceil(t/2)-Math.abs(Math.floor(t/2)-e)-1;return gsap.utils.mapRange(0,Math.ceil(t/2),.5,2.1,o)},y:e=>{const o=e<Math.ceil(t/2)?e:Math.ceil(t/2)-Math.abs(Math.floor(t/2)-e)-1;return gsap.utils.mapRange(0,Math.ceil(t/2),0,60,o)},rotation:e=>{const o=e<Math.ceil(t/2)?e:Math.ceil(t/2)-Math.abs(Math.floor(t/2)-e)-1;return e<t/2?gsap.utils.mapRange(0,Math.ceil(t/2),-4,0,o):gsap.utils.mapRange(0,Math.ceil(t/2),0,4,o)},filter:"blur(12px) opacity(0)"},{ease:"power2.inOut",y:0,rotation:0,scale:1,filter:"blur(0px) opacity(1)",stagger:{amount:.15,from:"center"}},"start+=0.4")}}))};window.onload=()=>{showHero(),initParallax()};